<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile & Sanitaryware Inventory</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .product-card {
            transition: transform 0.2s, box-shadow 0.2s;
            height: 100%;
            border: 1px solid #dee2e6;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #e9ecef;
        }
        .stock-badge {
            font-size: 1rem;
            padding: 0.5rem 1rem;
        }
        .stock-good {
            background-color: #28a745;
            color: white;
        }
        .stock-low {
            background-color: #ffc107;
            color: black;
        }
        .stock-out {
            background-color: #dc3545;
            color: white;
        }
        .card-actions {
            display: flex;
            gap: 0.5rem;
        }
        .btn-action {
            flex: 1;
        }
        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1.2rem;
        }
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #6c757d;
        }
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        @media (max-width: 768px) {
            .btn-lg {
                padding: 0.75rem 1.5rem;
                font-size: 1rem;
            }
            .product-image {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    
    <!-- Header -->
    <nav class="navbar navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-boxes"></i> Tile & Sanitaryware Inventory
            </span>
            <div>
                <button class="btn btn-light btn-sm me-2" onclick="exportData()">
                    <i class="bi bi-download"></i> Backup
                </button>
                <button class="btn btn-light btn-sm" onclick="importData()">
                    <i class="bi bi-upload"></i> Restore
                </button>
            </div>
        </div>
    </nav>

    <div class="container-fluid py-4">
        
        <!-- Action Buttons -->
        <div class="row mb-4">
            <div class="col-12 text-center">
                <button class="btn btn-success btn-lg me-2 mb-2" onclick="showAddProduct()">
                    <i class="bi bi-plus-circle"></i> Add Product
                </button>
                <button class="btn btn-info btn-lg mb-2" onclick="showSalesSection()">
                    <i class="bi bi-cart-check"></i> Record Sale
                </button>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="row mb-4">
            <div class="col-md-4 mb-3">
                <div class="card text-center shadow-sm">
                    <div class="card-body">
                        <i class="bi bi-box-seam text-primary" style="font-size: 2rem;"></i>
                        <h3 class="mt-2" id="totalProducts">0</h3>
                        <p class="text-muted mb-0">Total Products</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card text-center shadow-sm">
                    <div class="card-body">
                        <i class="bi bi-currency-rupee text-success" style="font-size: 2rem;"></i>
                        <h3 class="mt-2" id="salesToday">₹0</h3>
                        <p class="text-muted mb-0">Sales Today</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card text-center shadow-sm">
                    <div class="card-body">
                        <i class="bi bi-exclamation-triangle text-danger" style="font-size: 2rem;"></i>
                        <h3 class="mt-2" id="lowStock">0</h3>
                        <p class="text-muted mb-0">Low Stock Items</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="row mb-3">
            <div class="col-md-6 mx-auto">
                <input type="text" class="form-control form-control-lg" id="searchInput" 
                       placeholder="🔍 Search products by name or brand..." 
                       onkeyup="searchProducts()">
            </div>
        </div>

        <!-- Products Section -->
        <div class="row mb-4">
            <div class="col-12">
                <h4 class="mb-3">Products Inventory</h4>
                <div class="row" id="productsList">
                    <!-- Products will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Recent Sales Section -->
        <div class="row">
            <div class="col-12">
                <h4 class="mb-3">Recent Sales</h4>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead class="table-primary">
                            <tr>
                                <th>Date & Time</th>
                                <th>Product</th>
                                <th>Quantity</th>
                                <th>Unit</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody id="salesList">
                            <!-- Sales will be displayed here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <!-- Add/Edit Product Modal -->
    <div class="modal fade" id="productModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="modalTitle">Add New Product</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="productForm">
                        <input type="hidden" id="productId">
                        
                        <div class="row mb-3">
                            <div class="col-md-8">
                                <label class="form-label">Product Name *</label>
                                <input type="text" class="form-control" id="productName" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Category *</label>
                                <select class="form-select" id="category" required>
                                    <option value="">Select</option>
                                    <option value="Tiles">Tiles</option>
                                    <option value="Sanitaryware">Sanitaryware</option>
                                    <option value="Accessories">Accessories</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Brand</label>
                                <input type="text" class="form-control" id="brand">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Size</label>
                                <input type="text" class="form-control" id="size" placeholder="e.g., 2x2 feet">
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label">Unit Type *</label>
                                <select class="form-select" id="unitType" required>
                                    <option value="Box">Box</option>
                                    <option value="Piece">Piece</option>
                                    <option value="SFT">Square Feet</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Pieces per Box</label>
                                <input type="number" class="form-control" id="piecesPerBox" value="1">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">SFT per Box</label>
                                <input type="number" class="form-control" id="sftPerBox" step="0.01">
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label">Price per Unit *</label>
                                <input type="number" class="form-control" id="price" required step="0.01">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Current Stock *</label>
                                <input type="number" class="form-control" id="stock" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Minimum Stock</label>
                                <input type="number" class="form-control" id="minStock" value="5">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Product Image URL (optional)</label>
                            <input type="url" class="form-control" id="imageUrl" placeholder="https://example.com/image.jpg">
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveProduct()">Save Product</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sales Modal -->
    <div class="modal fade" id="salesModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title">Record New Sale</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="salesForm">
                        <div class="mb-3">
                            <label class="form-label">Select Product *</label>
                            <select class="form-select" id="saleProduct" onchange="updateSalePrice()" required>
                                <option value="">Choose product...</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Quantity *</label>
                            <input type="number" class="form-control" id="saleQuantity" 
                                   onkeyup="updateSalePrice()" required min="1">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Unit Price</label>
                            <input type="text" class="form-control" id="saleUnitPrice" readonly>
                        </div>

                        <div class="mb-3">
                            <h4>Total Amount: <span class="text-success" id="saleTotal">₹0</span></h4>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="recordSale()">Complete Sale</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for import -->
    <input type="file" id="fileInput" accept=".json" style="display:none" onchange="handleFileImport(event)">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- ALL JavaScript Code Here -->
    <script>
        // ========== STORAGE FUNCTIONS ==========
        
        function getProducts() {
            const products = localStorage.getItem('products');
            return products ? JSON.parse(products) : [];
        }

        function saveProducts(products) {
            localStorage.setItem('products', JSON.stringify(products));
        }

        function getSales() {
            const sales = localStorage.getItem('sales');
            return sales ? JSON.parse(sales) : [];
        }

        function saveSales(sales) {
            localStorage.setItem('sales', JSON.stringify(sales));
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function exportData() {
            const data = {
                products: getProducts(),
                sales: getSales(),
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `inventory-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('✅ Backup downloaded successfully!');
        }

        function importData() {
            document.getElementById('fileInput').click();
        }

        function handleFileImport(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.products) {
                        localStorage.setItem('products', JSON.stringify(data.products));
                    }
                    if (data.sales) {
                        localStorage.setItem('sales', JSON.stringify(data.sales));
                    }
                    
                    alert('✅ Data restored successfully!');
                    location.reload();
                } catch (error) {
                    alert('❌ Error: Invalid backup file!');
                }
            };
            reader.readAsText(file);
        }

        // ========== PRODUCT FUNCTIONS ==========
        
        let editingProductId = null;

        function displayProducts() {
            const products = getProducts();
            const productsList = document.getElementById('productsList');
            
            if (products.length === 0) {
                productsList.innerHTML = `
                    <div class="col-12">
                        <div class="empty-state">
                            <i class="bi bi-inbox"></i>
                            <h4>No Products Yet</h4>
                            <p>Click "Add Product" to add your first item</p>
                        </div>
                    </div>
                `;
                return;
            }
            
            productsList.innerHTML = '';
            
            products.forEach(product => {
                const stockClass = product.stock > product.minStock ? 'stock-good' : 
                                  product.stock > 0 ? 'stock-low' : 'stock-out';
                
                const stockText = product.stock > product.minStock ? 'In Stock' : 
                                 product.stock > 0 ? 'Low Stock' : 'Out of Stock';
                
                const imageUrl = product.imageUrl || 'https://via.placeholder.com/300x200?text=' + encodeURIComponent(product.name);
                
                const card = `
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card product-card">
                            <img src="${imageUrl}" class="product-image" alt="${product.name}" 
                                 onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                            <div class="card-body">
                                <h5 class="card-title">${product.name}</h5>
                                <p class="card-text text-muted mb-2">
                                    <small>${product.category} ${product.brand ? '• ' + product.brand : ''}</small>
                                </p>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="badge stock-badge ${stockClass}">${stockText}</span>
                                    <h5 class="mb-0">Stock: ${product.stock}</h5>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span>Price: <strong>₹${product.price}</strong>/${product.unitType}</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary btn-action" onclick="editProduct('${product.id}')">
                                        <i class="bi bi-pencil"></i> Edit
                                    </button>
                                    <button class="btn btn-danger btn-action" onclick="deleteProduct('${product.id}')">
                                        <i class="bi bi-trash"></i> Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                productsList.innerHTML += card;
            });
        }

        function showAddProduct() {
            editingProductId = null;
            document.getElementById('modalTitle').textContent = 'Add New Product';
            document.getElementById('productForm').reset();
            document.getElementById('productId').value = '';
            
            const modal = new bootstrap.Modal(document.getElementById('productModal'));
            modal.show();
        }

        function editProduct(id) {
            const products = getProducts();
            const product = products.find(p => p.id === id);
            
            if (!product) return;
            
            editingProductId = id;
            document.getElementById('modalTitle').textContent = 'Edit Product';
            document.getElementById('productId').value = product.id;
            document.getElementById('productName').value = product.name;
            document.getElementById('category').value = product.category;
            document.getElementById('brand').value = product.brand || '';
            document.getElementById('size').value = product.size || '';
            document.getElementById('unitType').value = product.unitType;
            document.getElementById('piecesPerBox').value = product.piecesPerBox || 1;
            document.getElementById('sftPerBox').value = product.sftPerBox || '';
            document.getElementById('price').value = product.price;
            document.getElementById('stock').value = product.stock;
            document.getElementById('minStock').value = product.minStock;
            document.getElementById('imageUrl').value = product.imageUrl || '';
            
            const modal = new bootstrap.Modal(document.getElementById('productModal'));
            modal.show();
        }

        function saveProduct() {
            const name = document.getElementById('productName').value.trim();
            const category = document.getElementById('category').value;
            const brand = document.getElementById('brand').value.trim();
            const size = document.getElementById('size').value.trim();
            const unitType = document.getElementById('unitType').value;
            const piecesPerBox = parseInt(document.getElementById('piecesPerBox').value) || 1;
            const sftPerBox = parseFloat(document.getElementById('sftPerBox').value) || 0;
            const price = parseFloat(document.getElementById('price').value);
            const stock = parseInt(document.getElementById('stock').value);
            const minStock = parseInt(document.getElementById('minStock').value) || 5;
            const imageUrl = document.getElementById('imageUrl').value.trim();
            
            if (!name || !category || !price || stock < 0) {
                alert('❌ Please fill all required fields!');
                return;
            }
            
            const products = getProducts();
            
            if (editingProductId) {
                const index = products.findIndex(p => p.id === editingProductId);
                if (index !== -1) {
                    products[index] = {
                        ...products[index],
                        name, category, brand, size, unitType,
                        piecesPerBox, sftPerBox, price, stock, minStock, imageUrl,
                        updatedAt: new Date().toISOString()
                    };
                }
            } else {
                const newProduct = {
                    id: generateId(),
                    name, category, brand, size, unitType,
                    piecesPerBox, sftPerBox, price, stock, minStock, imageUrl,
                    createdAt: new Date().toISOString()
                };
                products.push(newProduct);
            }
            
            saveProducts(products);
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('productModal'));
            modal.hide();
            
            displayProducts();
            updateSummary();
            loadProductsForSale();
            
            alert('✅ Product saved successfully!');
        }

        function deleteProduct(id) {
            if (!confirm('Are you sure you want to delete this product?')) return;
            
            let products = getProducts();
            products = products.filter(p => p.id !== id);
            saveProducts(products);
            
            displayProducts();
            updateSummary();
            loadProductsForSale();
            
            alert('✅ Product deleted successfully!');
        }

        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const products = getProducts();
            
            const filtered = products.filter(p => 
                p.name.toLowerCase().includes(searchTerm) ||
                (p.brand && p.brand.toLowerCase().includes(searchTerm)) ||
                p.category.toLowerCase().includes(searchTerm)
            );
            
            const productsList = document.getElementById('productsList');
            
            if (filtered.length === 0) {
                productsList.innerHTML = `
                    <div class="col-12">
                        <div class="empty-state">
                            <i class="bi bi-search"></i>
                            <h4>No Results Found</h4>
                            <p>Try different search terms</p>
                        </div>
                    </div>
                `;
                return;
            }
            
            productsList.innerHTML = '';
            
            filtered.forEach(product => {
                const stockClass = product.stock > product.minStock ? 'stock-good' : 
                                  product.stock > 0 ? 'stock-low' : 'stock-out';
                
                const stockText = product.stock > product.minStock ? 'In Stock' : 
                                 product.stock > 0 ? 'Low Stock' : 'Out of Stock';
                
                const imageUrl = product.imageUrl || 'https://via.placeholder.com/300x200?text=' + encodeURIComponent(product.name);
                
                const card = `
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card product-card">
                            <img src="${imageUrl}" class="product-image" alt="${product.name}"
                                 onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                            <div class="card-body">
                                <h5 class="card-title">${product.name}</h5>
                                <p class="card-text text-muted mb-2">
                                    <small>${product.category} ${product.brand ? '• ' + product.brand : ''}</small>
                                </p>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="badge stock-badge ${stockClass}">${stockText}</span>
                                    <h5 class="mb-0">Stock: ${product.stock}</h5>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span>Price: <strong>₹${product.price}</strong>/${product.unitType}</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary btn-action" onclick="editProduct('${product.id}')">
                                        <i class="bi bi-pencil"></i> Edit
                                    </button>
                                    <button class="btn btn-danger btn-action" onclick="deleteProduct('${product.id}')">
                                        <i class="bi bi-trash"></i> Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                productsList.innerHTML += card;
            });
        }

        // ========== SALES FUNCTIONS ==========
        
        function loadProductsForSale() {
            const products = getProducts();
            const select = document.getElementById('saleProduct');
            
            select.innerHTML = '<option value="">Choose product...</option>';
            
            products.forEach(product => {
                if (product.stock > 0) {
                    select.innerHTML += `
                        <option value="${product.id}">
                            ${product.name} (Stock: ${product.stock} ${product.unitType})
                        </option>
                    `;
                }
            });
        }

        function showSalesSection() {
            loadProductsForSale();
            document.getElementById('salesForm').reset();
            document.getElementById('saleTotal').textContent = '₹0';
            document.getElementById('saleUnitPrice').value = '';
            
            const modal = new bootstrap.Modal(document.getElementById('salesModal'));
            modal.show();
        }

        function updateSalePrice() {
            const productId = document.getElementById('saleProduct').value;
            const quantity = parseInt(document.getElementById('saleQuantity').value) || 0;
            
            if (!productId || quantity <= 0) {
                document.getElementById('saleTotal').textContent = '₹0';
                document.getElementById('saleUnitPrice').value = '';
                return;
            }
            
            const products = getProducts();
            const product = products.find(p => p.id === productId);
            
            if (!product) return;
            
            if (quantity > product.stock) {
                alert(`❌ Only ${product.stock} ${product.unitType} available in stock!`);
                document.getElementById('saleQuantity').value = product.stock;
                return;
            }
            
            const total = product.price * quantity;
            document.getElementById('saleTotal').textContent = '₹' + total.toFixed(2);
            document.getElementById('saleUnitPrice').value = '₹' + product.price + '/' + product.unitType;
        }

        function recordSale() {
            const productId = document.getElementById('saleProduct').value;
            const quantity = parseInt(document.getElementById('saleQuantity').value);
            
            if (!productId || !quantity || quantity <= 0) {
                alert('❌ Please select product and enter quantity!');
                return;
            }
            
            const products = getProducts();
            const productIndex = products.findIndex(p => p.id === productId);
            
            if (productIndex === -1) {
                alert('❌ Product not found!');
                return;
            }
            
            const product = products[productIndex];
            
            if (quantity > product.stock) {
                alert(`❌ Insufficient stock! Only ${product.stock} available.`);
                return;
            }
            
            const total = product.price * quantity;
            
            const sale = {
                id: generateId(),
                productId: product.id,
                productName: product.name,
                quantity: quantity,
                unitType: product.unitType,
                unitPrice: product.price,
                totalAmount: total,
                date: new Date().toISOString()
            };
            
            const sales = getSales();
            sales.unshift(sale);
            saveSales(sales);
            
            products[productIndex].stock -= quantity;
            saveProducts(products);
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('salesModal'));
            modal.hide();
            
            displayProducts();
            displaySales();
            updateSummary();
            
            alert(`✅ Sale recorded successfully!\nTotal: ₹${total.toFixed(2)}`);
        }

        function displaySales() {
            const sales = getSales();
            const salesList = document.getElementById('salesList');
            
            if (sales.length === 0) {
                salesList.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center text-muted py-4">
                            No sales recorded yet
                        </td>
                    </tr>
                `;
                return;
            }
            
            salesList.innerHTML = '';
            
            const recentSales = sales.slice(0, 10);
            
            recentSales.forEach(sale => {
                const date = new Date(sale.date);
                const formattedDate = date.toLocaleDateString('en-IN') + ' ' + 
                                     date.toLocaleTimeString('en-IN', {hour: '2-digit', minute: '2-digit'});
                
                const row = `
                    <tr>
                        <td>${formattedDate}</td>
                        <td>${sale.productName}</td>
                        <td>${sale.quantity}</td>
                        <td>${sale.unitType}</td>
                        <td class="text-success fw-bold">₹${sale.totalAmount.toFixed(2)}</td>
                    </tr>
                `;
                
                salesList.innerHTML += row;
            });
        }

        // ========== APP FUNCTIONS ==========
        
        function updateSummary() {
            const products = getProducts();
            const sales = getSales();
            
            document.getElementById('totalProducts').textContent = products.length;
            
            const today = new Date().toDateString();
            const todaySales = sales.filter(sale => {
                const saleDate = new Date(sale.date).toDateString();
                return saleDate === today;
            });
            
            const totalSalesToday = todaySales.reduce((sum, sale) => sum + sale.totalAmount, 0);
            document.getElementById('salesToday').textContent = '₹' + totalSalesToday.toFixed(2);
            
            const lowStockItems = products.filter(p => p.stock <= p.minStock && p.stock > 0);
            document.getElementById('lowStock').textContent = lowStockItems.length;
        }

        // Initialize app when page loads
        window.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Tile & Sanitaryware Inventory App Loaded');
            
            displayProducts();
            displaySales();
            updateSummary();
            loadProductsForSale();
            
            const products = getProducts();
            if (products.length === 0) {
                const sampleProducts = [
                    {
                        id: generateId(),
                        name: 'Glossy Floor Tile',
                        category: 'Tiles',
                        brand: 'Kajaria',
                        size: '2x2 feet',
                        unitType: 'Box',
                        piecesPerBox: 4,
                        sftPerBox: 16,
                        price: 800,
                        stock: 50,
                        minStock: 10,
                        imageUrl: '',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: generateId(),
                        name: 'Wall Mounted Basin',
                        category: 'Sanitaryware',
                        brand: 'Hindware',
                        size: 'Standard',
                        unitType: 'Piece',
                        piecesPerBox: 1,
                        sftPerBox: 0,
                        price: 3500,
                        stock: 15,
                        minStock: 5,
                        imageUrl: '',
                        createdAt: new Date().toISOString()
                    }
                ];
                
                saveProducts(sampleProducts);
                displayProducts();
                updateSummary();
                loadProductsForSale();
            }
        });
    </script>

</body>
</html>
